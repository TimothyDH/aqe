<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Clara Tests</title>
</head>
<body>
<div id='root'></div>

<script src="https://fb.me/react-15.0.1.js"></script>
<script src="https://fb.me/react-dom-15.0.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script type="text/babel">


var QuestionText = React.createClass({
  getDefaultProps: function() {
    return {
      question_text: "loading..."
    };
  },
  render: function() {
    return (<div>{this.props.question.question_text}</div>);
  }
});

var QuestionAnswer = React.createClass({
  render: function() {
    return (<div><input type="text" name="user_answer" /></div>);
  }
});

var SubmitButton = React.createClass({
    render: function() {
        return (<input type="submit" value="Submit Answer" />);
    }
});

var MathQuestionSimple = React.createClass({
render: function() {
        return (<QuestionText question={QUESTION}/>);
    }
});

var QUESTION = {"question_text":"Two small towns, called Moira and Dollingstown are connected by a long, straight road. You are walking along that road and see a signpost that says Moira is 86.4 away and Dollingstown Dollingstown is 43.7 away. What is the distance between the two towns?","question_answer":130.1,"answer_type":"NUMBER"}

var App = React.createClass({


  loadQuestionsFromServer: function () {
    var self = this;
    $.ajax({
      url: "http://localhost:8080/api/2010",
      type: 'get',
      dataType: 'json'
    }).then(function (data) {
      console.log(data);
      self.setState({questions: data});
    });
  },

  getInitialState: function () {
    return {questions: []};
  },

  componentDidMount: function () {
    this.loadQuestionsFromServer();
  },

  render() {
    console.log("+++QUESTIONS+++");
    var questionList = this.state.questions;
    console.log("num QUESTIONS:" + questionList.length);
    questionList.forEach(
            function(item, index, array) {
                console.log(item, index);
       }
    );
    console.log(this.state.questions);
    aquestion = questions[0];
    return ( <QuestionText question={aquestion}/>
    );
  }
});

ReactDOM.render(
  <App />,
   document.getElementById('root')
);

</script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</body>
</html>